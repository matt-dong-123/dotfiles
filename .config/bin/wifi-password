#!/usr/bin/env bash

copy=false
if [[ $1 == "--copy" ]] || [[ $1 == "-c" ]]; then
    copy=true
    shift
fi

if [[ $# -ne 1 ]]; then
    >&2 echo "usage: $0 [-c|--copy] [wifi-network]"
    exit 1
fi

NETWORK="$1"
if $copy; then
    security find-generic-password -wa "$NETWORK" | pbcopy
else
    security find-generic-password -wa "$NETWORK"
fi
