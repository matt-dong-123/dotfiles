"use strict";var l=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var d=(r,e)=>{for(var n in e)l(r,n,{get:e[n],enumerable:!0})},h=(r,e,n,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of f(e))!p.call(r,o)&&o!==n&&l(r,o,{get:()=>e[o],enumerable:!(a=w(e,o))||a.enumerable});return r};var P=r=>h(l({},"__esModule",{value:!0}),r);var b={};d(b,{default:()=>c});module.exports=P(b);var s=require("@raycast/api");var i=[{name:"Google Search",url:"google.com",allowParams:["q","ie"]},{name:"Baidu Search",url:"baidu.com",allowParams:["wd","ie"]},{name:"Bing Search",url:"bing.com",allowParams:["q"]},{name:"Netease Music",url:"music.163.com",allowParams:["id"]},{name:"Youtube",url:"youtube.com",allowParams:["v","search_query"]},{name:"Instagram Reel",url:"instagram.com/reel",allowParams:[]}];function u(r){let e=/(https?:\/\/[^\s]+)/g,n=r.match(e);return n||[]}function R(r,e){let n=u(r);for(let a of n)r=r.replace(a,e.shift()||a);return r}function y(r,e){let n=r.split("?");if(n.length<2)return r;let a=n[1].split("&");if(e.length>0){let o=a.filter(t=>e.includes(t.split("=")[0]));return`${n[0]}?${o.join("&")}`}return n[0]}async function c(){let r=await s.Clipboard.readText();if(r===void 0){await(0,s.showHUD)("Clipboard is empty");return}let e=u(r);if(e.length===0){await(0,s.showHUD)("No URL found");return}console.log("raw urls",e);let n=[];for(let o of e){let t=i.find(g=>o.includes(g.url))?.allowParams||[];console.log("allow params",t);let m=y(o,t);n.push(m)}console.log("new urls",n);let a=R(r,n);console.log("new text",a),await s.Clipboard.copy(a),await(0,s.showHUD)("Removed tracking parameters")}
