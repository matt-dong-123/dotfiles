#!/usr/bin/env bash
set -euo pipefail

if [[ $# -ne 1 ]]; then
    echo "Usage: $0 <colorscheme>"
    exit 1
fi

RUNTIME=${XDG_RUNTIME_DIR:-$TMPDIR}
for sock in "$RUNTIME"/nvim.*; do
    [[ -S $sock ]] || continue
    nvim --server "$sock" --remote-send "<cmd>colorscheme $1<CR>" 2>/dev/null || :
done
