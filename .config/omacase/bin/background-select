#!/usr/bin/env bash

source "$HOME/.bash_profile"

wallpaper=$(realpath "$HOME/.config/omacase/current/theme/backgrounds")
fzf_args=(
    --preview "$HOME/.config/zsh/fzf-preview.sh $wallpaper/{}"
    --border-label ' ï€¾ Backgrounds '
)

selection=$(find "$wallpaper" -maxdepth 1 -type f | fzf "${fzf_args[@]}")

if [[ -n "$selection" ]]; then
    osascript -e "tell application \"System Events\" to set picture of every desktop to POSIX file \"$wallpaper/$selection\""
fi
