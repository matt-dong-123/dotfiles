#!/usr/bin/env -S bash -l

fzf_args=(
    --preview 'HOMEBREW_COLOR=1 brew info {}'
    --border-label ' Û∞èó brew install '
)

pkg_names=$({
    brew formulae
    brew casks
} | fzf "${fzf_args[@]}")

if [[ -n "$pkg_names" ]]; then
    echo "$pkg_names" | tr '\n' ' ' | xargs brew install
    homebrew-sync-with-packages
fi
